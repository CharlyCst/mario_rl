(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"6aRn":function(t,e,r){"use strict";function a(t){return new Promise((function(e){return setTimeout(e,t)}))}r.d(e,"a",(function(){return a}))},CHqN:function(t,e,r){"use strict";r.d(e,"b",(function(){return n}));var a={ground:new Image,borderTop:new Image,borderLeft:new Image,borderRight:new Image,borderLeftUp:new Image,borderRightUp:new Image,borderBottom:new Image,borderBottom2:new Image,borderBottomLeft:new Image,borderBottomLeft2:new Image,borderBottomRight:new Image,borderBottomRight2:new Image,goomba:new Image,goomba2:new Image,goomba3:new Image,marioFace:new Image,marioFace1:new Image,marioFace2:new Image,marioLeft:new Image,marioLeft1:new Image,marioLeft2:new Image,marioRight:new Image,marioRight1:new Image,marioRight2:new Image,marioBack:new Image,marioBack1:new Image,marioBack2:new Image,block:new Image,redBlock:new Image,blockShadow:new Image};a.ground.src="assets/ground.png",a.borderTop.src="assets/border_top.png",a.borderLeft.src="assets/border_left.png",a.borderRight.src="assets/border_right.png",a.borderLeftUp.src="assets/border_left_up.png",a.borderRightUp.src="assets/border_right_up.png",a.borderBottom.src="assets/border_bottom.png",a.borderBottom2.src="assets/border_bottom2.png",a.borderBottomLeft.src="assets/border_bottom_left.png",a.borderBottomLeft2.src="assets/border_bottom_left2.png",a.borderBottomRight.src="assets/border_bottom_right.png",a.borderBottomRight2.src="assets/border_bottom_right2.png",a.goomba.src="assets/goomba.png",a.goomba2.src="assets/goomba2.png",a.goomba3.src="assets/goomba3.png",a.marioFace.src="assets/mario_front.png",a.marioFace1.src="assets/mario_front1.png",a.marioFace2.src="assets/mario_front2.png",a.marioBack.src="assets/mario_back.png",a.marioBack1.src="assets/mario_back1.png",a.marioBack2.src="assets/mario_back2.png",a.marioRight.src="assets/mario_right.png",a.marioRight1.src="assets/mario_right1.png",a.marioRight2.src="assets/mario_right2.png",a.marioLeft.src="assets/mario_left.png",a.marioLeft1.src="assets/mario_left1.png",a.marioLeft2.src="assets/mario_left2.png",a.block.src="assets/block.png",a.redBlock.src="assets/red_block.png",a.blockShadow.src="assets/block_shadow.png";var n=function(){var t=!0;for(var e in a)t=t&&a[e].complete;return console.log(t),t};e.a=a},CpHl:function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return l}));var a=r("QRet"),n=r("M/gY"),i=r("6aRn"),o=[255,0,255],s=[0,255,255],c=function(t){var e=Math.min(1,Math.max(0,1/(1+Math.exp(-3*t))));return"rgb(\n        "+Math.floor(s[0]+(o[0]-s[0])*e)+",\n        "+Math.floor(s[1]+(o[1]-s[1])*e)+",\n        "+Math.floor(s[2]+(o[2]-s[2])*e)+")"},l=function(e){var r=Object(a.j)(null),l=function(){return new Promise((function(t,a){function l(){return function(t,e,r,a){t.strokeStyle="#000000",t.lineWidth=1;for(var i=0;i<r;i++)for(var o=0;o<a;o++)t.fillStyle=c(0),t.fillRect(i*n.e,o*n.e,n.e,n.e),t.strokeRect(i*n.e,o*n.e,n.e,n.e),t.fillStyle=c(e[i][o][n.d]),t.beginPath(),t.moveTo((i+.5)*n.e,(o+.5)*n.e),t.lineTo((i+1)*n.e,o*n.e),t.lineTo(i*n.e,o*n.e),t.fill(),t.fillStyle=c(e[i][o][n.c]),t.beginPath(),t.moveTo((i+.5)*n.e,(o+.5)*n.e),t.lineTo((i+1)*n.e,o*n.e),t.lineTo((i+1)*n.e,(o+1)*n.e),t.fill(),t.fillStyle=c(e[i][o][n.a]),t.beginPath(),t.moveTo((i+.5)*n.e,(o+.5)*n.e),t.lineTo((i+1)*n.e,(o+1)*n.e),t.lineTo(i*n.e,(o+1)*n.e),t.fill(),t.fillStyle=c(e[i][o][n.b]),t.beginPath(),t.moveTo((i+.5)*n.e,(o+.5)*n.e),t.lineTo(i*n.e,(o+1)*n.e),t.lineTo(i*n.e,o*n.e),t.fill()}(u,e.agent.Q,e.map.w,e.map.h),Promise.resolve(Object(i.a)(200)).then((function(){try{return l}catch(t){return a(t)}}),a)}function h(){return t()}var u,f;return null==r.current||null==(u=r.current.getContext("2d"))?t():(u.translate(n.e,n.e),function(t,e,r){t.strokeStyle="#000000";var a=t.createLinearGradient(0,(.5+r)*n.e,e*n.e,(.9+r)*n.e);a.addColorStop(1,"rgb("+o[0]+","+o[1]+","+o[2]+")"),a.addColorStop(0,"rgb("+s[0]+","+s[1]+","+s[2]+")"),t.fillStyle=a,t.strokeRect(0,(.5+r)*n.e,e*n.e,.4*n.e),t.fillRect(0,(.5+r)*n.e,e*n.e,.4*n.e),t.font="14px sans-serif",t.textAlign="center",t.fillStyle="#000000",t.fillText("0",e*n.e/2,(1.5+r)*n.e),t.fillText("+∞",e*n.e,(1.5+r)*n.e),t.fillText("-∞",0,(1.5+r)*n.e)}(u,e.map.w,e.map.h),(f=function(t){for(;t;){if(t.then)return void t.then(f,a);try{if(t.pop){if(t.length)return t.pop()?h.call(this):t;t=l}else t=t.call(this)}catch(t){return a(t)}}}.bind(this))(l))}))};return Object(a.d)((function(){l()})),t("canvas",{width:(2+e.map.w)*n.e,height:(3+e.map.h)*n.e,ref:r})}}).call(this,r("hosL").h)},"M/gY":function(t,e,r){"use strict";r.d(e,"d",(function(){return a})),r.d(e,"c",(function(){return n})),r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return o})),r.d(e,"e",(function(){return s}));var a=0,n=1,i=2,o=3,s=24},VNCQ:function(t,e,r){"use strict";function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.d(e,"a",(function(){return s}));var n=r("CHqN"),i=r("M/gY"),o=function(t){for(var e=-1/0,r=[],a=0;a<t.length;a++)t[a]>e?(r=[a],e=t[a]):t[a]==e&&r.push(a);return 1==r.length?r[0]:r[Math.floor(Math.random()*r.length)]},s=function(){function t(t,e,r,n){a(this,"Q",[[[]]]),a(this,"learningRate",.3),a(this,"gamma",.8),a(this,"epsilon",.2),a(this,"beta",3),a(this,"softmax",!1),a(this,"QLearning",!1),a(this,"nSteps",1),a(this,"x",void 0),a(this,"y",void 0),a(this,"lastX",void 0),a(this,"lastY",void 0),a(this,"lastRewards",[]),a(this,"lastActions",[]),a(this,"lastGreedyAction",void 0),a(this,"initialPositionX",0),a(this,"initialPositionY",0),this.lastActions=[i.a],this.lastGreedyAction=i.a,this.initialPositionX=r||0,this.initialPositionY=n||0,this.x=this.initialPositionX,this.y=this.initialPositionY,this.lastX=[this.initialPositionX],this.lastY=[this.initialPositionY],this.initQ(t,e)}var e=t.prototype;return e.initQ=function(t,e){this.Q=[];for(var r=0;r<e;r++){for(var a=[],n=0;n<t;n++)a.push(new Array(4).fill(0));this.Q.push(a)}},e.newRun=function(){for(var t,e=(null==(t=this.lastActions)?void 0:t.shift())||i.a,r=this.nSteps;r>0;r--)this.reinforce(r,e);this.x=this.initialPositionX,this.y=this.initialPositionY,this.lastX=[this.initialPositionX],this.lastY=[this.initialPositionY],this.lastRewards=[],this.lastActions=[i.a]},e.chooseAction=function(){var t,e=this.Q[this.x][this.y];return t=this.softmax?function(t,e){for(var r=0,a=0;a<4;a++)r+=Math.exp(t*e[a]);for(var n=Math.random(),i=0,o=0;o<4;o++)if((i+=Math.exp(t*e[o])/r)>=n)return o;return 3}(this.beta,e):function(t,e){return Math.random()<t?Math.floor(Math.random()*e.length):o(e)}(this.epsilon,e),this.lastGreedyAction=o(e),this.reinforce(this.nSteps,t),this.lastActions.unshift(t),t},e.reinforce=function(t,e){if(!(this.lastRewards.length<t)){for(var r=-this.Q[this.lastX[t-1]][this.lastY[t-1]][this.lastActions[t-1]],a=1,n=t-1;n>=0;n--)r+=this.lastRewards[n]*a,a*=this.gamma;this.Q[this.lastX[t-1]][this.lastY[t-1]][this.lastActions[t-1]]+=this.learningRate*(r+=this.QLearning?a*this.Q[this.x][this.y][this.lastGreedyAction]:a*this.Q[this.x][this.y][e]),this.lastActions.pop(),this.lastRewards.pop(),this.lastX.pop(),this.lastY.pop()}},e.getReward=function(t){this.lastRewards.unshift(t)},e.newPosition=function(t,e){this.lastX.unshift(this.x),this.lastY.unshift(this.y),this.x=t,this.y=e},e.getSprite=function(t){switch(this.lastActions[0]){case i.d:switch(t%4){case 0:return n.a.marioBack;case 1:return n.a.marioBack1;case 2:return n.a.marioBack;case 3:return n.a.marioBack2}case i.c:switch(t%4){case 0:return n.a.marioRight;case 1:return n.a.marioRight1;case 2:return n.a.marioRight;case 3:return n.a.marioRight2}case i.a:switch(t%4){case 0:return n.a.marioFace;case 1:return n.a.marioFace1;case 2:return n.a.marioFace;case 3:return n.a.marioFace2}case i.b:switch(t%4){case 0:return n.a.marioLeft;case 1:return n.a.marioLeft1;case 2:return n.a.marioLeft;case 3:return n.a.marioLeft2}default:return console.log("Failed to get sprite for agent: "+this.lastActions),n.a.marioFace}},e.draw=function(t,e){var r=(this.x-this.lastX[0])*(e%4+1)/4,a=(this.y-this.lastY[0])*(e%4+1)/4;t.drawImage(this.getSprite(e),i.e*(this.lastX[0]+r),i.e*(this.lastY[0]+a)-i.e/2)},t}()},X7l8:function(t,e,r){"use strict";(function(t){r.d(e,"b",(function(){return S})),r.d(e,"c",(function(){return P})),r.d(e,"f",(function(){return A})),r.d(e,"d",(function(){return C})),r.d(e,"e",(function(){return j})),r.d(e,"a",(function(){return O}));var a=r("QRet"),n=r("R82R"),i=r("ozoj"),o=r("GU4W"),s=r("wGBp"),c=r("Fk5B"),l=r("Y2Hm"),h=r("WLS8"),u=r("/ZiB"),f=r("oQEK"),m=r("7eGz"),g=r.n(m),d=r("YMGn"),b=r.n(d),p=r("wKER"),w=r.n(p),v=r("f0vW"),y=r.n(v),k=c.a,R=l.a,I=h.a,x=o.a,B=s.a,L=Object(n.a)((function(t){return Object(i.a)({slider:{width:100+2*t.spacing(3)},margin:{height:t.spacing(3)}})})),_=function(e){return t(B,{open:e.open,enterTouchDelay:0,placement:"top",title:e.value},e.children)},S=function(e){var r=Object(a.k)(e.agent.gamma),n=r[0],i=r[1],o=L();return t("div",null,t(u.a,{gutterBottom:!0},"Discount factor"),t(x,{min:0,max:1,step:.02,ValueLabelComponent:_,value:n,onChange:function(t,r){"number"!=typeof r&&(r=r[0]),e.agent.gamma=r,i(r)},className:o.slider}))},P=function(e){var r=Object(a.k)(e.agent.learningRate),n=r[0],i=r[1],o=L();return t("div",null,t(u.a,{gutterBottom:!0},"Learning rate"),t(x,{min:0,max:1,step:.02,ValueLabelComponent:_,value:n,onChange:function(t,r){"number"!=typeof r&&(r=r[0]),e.agent.learningRate=r,i(r)},className:o.slider}))},A=function(e){var r=Object(a.k)(e.agent.nSteps),n=r[0],i=r[1],o=L();return t("div",null,t(u.a,{gutterBottom:!0},"Number of steps"),t(x,{min:1,max:4,step:1,marks:!0,ValueLabelComponent:_,value:n,onChange:function(t,r){"number"!=typeof r&&(r=r[0]),e.agent.nSteps=r,i(r)},className:o.slider}))},C=function(e){var r=Object(a.k)(e.agent.QLearning),n=r[0],i=r[1];return t("div",null,t(R,{"aria-label":"Policy",name:"Policy",value:n,onChange:function(){e.agent.QLearning=!n,i(!n)}},t(I,{value:!1,control:t(k,null),label:"Sarsa"}),t(I,{value:!0,control:t(k,null),label:"Q-learning"})))},j=function(e){var r=Object(a.k)(e.agent.softmax),n=r[0],i=r[1],o=Object(a.k)(e.agent.epsilon),s=o[0],c=o[1],l=Object(a.k)(e.agent.beta),h=l[0],f=l[1],m=L();return t("div",null,t(R,{"aria-label":"Policy",name:"Policy",value:n,onChange:function(){e.agent.softmax=!n,i(!n)}},t(I,{value:!1,control:t(k,null),label:"ε-greedy"}),t(I,{value:!0,control:t(k,null),label:"Softmax"})),n?t("div",null,t(u.a,{gutterBottom:!0},"Beta"),t(x,{min:1,max:8,step:.1,ValueLabelComponent:_,value:h,onChange:function(t,r){e.agent.beta=r,f(r)},className:m.slider})):t("div",null,t(u.a,{gutterBottom:!0},"Epsilon"),t(x,{min:0,max:1,step:.02,ValueLabelComponent:_,value:s,onChange:function(t,r){e.agent.epsilon=r,c(r)},className:m.slider})))},O=function(e){var r=Object(a.k)(e.map.run),n=r[0],i=r[1],o=Object(a.k)(e.map.refreshRate),s=o[0],c=o[1],l=n?"Pause":"Start",h=200,u="x20";switch(s){case 25:u="x8";break;case 100:u="x2";break;case 200:u="x1"}return t("div",null,t(B,{title:l},t(f.a,{"aria-label":"Play",onClick:function(){e.map.run=!n,i(!n)}},t(n?w.a:b.a,{fontSize:"small"}))),t(B,{title:u},t(f.a,{"aria-label":"Speed up",onClick:function(){return function(){switch(s){case 25:h=10;break;case 100:h=25;break;case 200:h=100}e.map.refreshRate=h,c(h)}()}},t(y.a,{fontSize:"small"}))),t(B,{title:"Reset"},t(f.a,{"aria-label":"Restart",onClick:function(){return e.map.restart()}},t(g.a,{fontSize:"small"}))))}}).call(this,r("hosL").h)},"u+C2":function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return s}));var a=r("QRet"),n=r("M/gY"),i=r("6aRn"),o=r("CHqN"),s=function(e){var r=Object(a.j)(null);return Object(a.d)((function(){new Promise((function(t,a){function s(){return Object(o.b)()?[1]:Promise.resolve(Object(i.a)(h)).then((function(){try{return h*=1.4,s}catch(t){return a(t)}}),a)}function c(){function r(){return e.map.draw(l),Promise.resolve(Object(i.a)(e.map.refreshRate)).then((function(){try{return r}catch(t){return a(t)}}),a)}function n(){return t()}var o;return(o=function(t){for(;t;){if(t.then)return void t.then(o,a);try{if(t.pop){if(t.length)return t.pop()?n.call(this):t;t=r}else t=t.call(this)}catch(t){return a(t)}}}.bind(this))(r)}var l,h,u;return null==r.current||null==(l=r.current.getContext("2d"))?t():(l.translate(n.e,n.e),h=10,(u=function(t){for(;t;){if(t.then)return void t.then(u,a);try{if(t.pop){if(t.length)return t.pop()?c.call(this):t;t=s}else t=t.call(this)}catch(t){return a(t)}}}.bind(this))(s))}))})),t("canvas",{width:(2+e.map.w)*n.e,height:(3+e.map.h)*n.e,ref:r})}}).call(this,r("hosL").h)},x4ky:function(t,e,r){"use strict";function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function n(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o(t,e){return new l(t,e)}r.d(e,"b",(function(){return u})),r.d(e,"c",(function(){return f})),r.d(e,"a",(function(){return m})),r.d(e,"d",(function(){return o}));var s=r("CHqN"),c=r("M/gY"),l=function(){function t(t,e){i(this,"map",void 0),i(this,"agents",void 0),i(this,"w",void 0),i(this,"h",void 0),i(this,"t",void 0),i(this,"turn",void 0),i(this,"run",!1),i(this,"initialRendering",!0),i(this,"refreshRate",200),this.turn=0,this.t=0,this.w=e,this.h=t,this.agents=[],this.map=[];for(var r=0;r<e;r++){var a=new Array(t);this.map.push(a)}}var e=t.prototype;return e.addAgent=function(t){this.agents.push(t)},e.addElement=function(t,e,r){this.map[e][r]=t},e.restart=function(){this.t=0,this.turn=0;var t=this.agents,e=Array.isArray(t),r=0;for(t=e?t:t[Symbol.iterator]();;){var a;if(e){if(r>=t.length)break;a=t[r++]}else{if((r=t.next()).done)break;a=r.value}var n=a;n.initQ(this.h,this.w),n.newRun()}},e.draw=function(t){if(this.run||this.initialRendering){this.initialRendering=!1,t.drawImage(s.a.borderLeftUp,-c.e,-c.e),t.drawImage(s.a.borderRightUp,c.e*this.w,-c.e);for(var e=0;e<this.w;e++)t.drawImage(s.a.borderTop,c.e*e,-c.e);for(var r=0;r<this.h;r++)for(var a=0;a<this.w;a++)t.drawImage(s.a.ground,c.e*a,c.e*r);for(var n=0;n<this.h;n++)t.drawImage(s.a.borderLeft,-c.e,c.e*n),t.drawImage(s.a.borderRight,c.e*this.w,c.e*n);for(var i=0;i<this.h;i++)for(var o=0;o<this.w;o++){var l=this.map[o][i];null!=l&&l.draw(t,o,i,this.t),this.drawAgent(t,o,i)}for(var h=0;h<this.w;h++)t.drawImage(s.a.borderBottom,c.e*h,c.e*this.h),t.drawImage(s.a.borderBottom2,c.e*h,c.e*(this.h+1));if(t.drawImage(s.a.borderBottomLeft,-c.e,c.e*this.h),t.drawImage(s.a.borderBottomLeft2,-c.e,c.e*(this.h+1)),t.drawImage(s.a.borderBottomRight,c.e*this.w,c.e*this.h),t.drawImage(s.a.borderBottomRight2,c.e*this.w,c.e*(this.h+1)),this.t++,this.t%4==0){this.turn++;var u=this.agents,f=Array.isArray(u),m=0;for(u=f?u:u[Symbol.iterator]();;){var g;if(f){if(m>=u.length)break;g=u[m++]}else{if((m=u.next()).done)break;g=m.value}var d=g,b=d.chooseAction();if(null==this.map[d.x][d.y]){var p=d.x,w=d.y;switch(b){case c.d:d.y>0&&w--;break;case c.c:d.x<this.w-1&&p++;break;case c.a:d.y<this.h-1&&w++;break;case c.b:d.x>0&&p--}var v=this.map[p][w];d.getReward(null!=v?v.reward:0),d.newPosition(p,w)}else d.newRun()}}}},e.drawAgent=function(t,e,r){var a=this.agents,n=Array.isArray(a),i=0;for(a=n?a:a[Symbol.iterator]();;){var o;if(n){if(i>=a.length)break;o=a[i++]}else{if((i=a.next()).done)break;o=i.value}o.x==e&&o.y==r&&o.draw(t,this.t)}},t}(),h=function(){function t(){i(this,"collision",void 0),i(this,"reward",void 0),i(this,"reset",void 0)}return t.prototype.draw=function(){},t}(),u=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return i(a(e=t.call.apply(t,[this].concat(n))||this),"collision",!1),i(a(e),"reward",1),i(a(e),"reset",!0),e}return n(e,t),e.prototype.draw=function(t,e,r){t.drawImage(s.a.block,c.e*e,c.e*(r-1.6)),t.drawImage(s.a.blockShadow,c.e*e,c.e*r)},e}(h),f=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return i(a(e=t.call.apply(t,[this].concat(n))||this),"collision",!1),i(a(e),"reward",.5),i(a(e),"reset",!0),e}return n(e,t),e.prototype.draw=function(t,e,r){t.drawImage(s.a.redBlock,c.e*e,c.e*(r-1.6)),t.drawImage(s.a.blockShadow,c.e*e,c.e*r)},e}(h),m=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return i(a(e=t.call.apply(t,[this].concat(n))||this),"collision",!1),i(a(e),"reward",-1),i(a(e),"reset",!0),e}return n(e,t),e.prototype.draw=function(t,e,r,a){switch(a%4){case 0:t.drawImage(s.a.goomba,c.e*e,c.e*r);break;case 1:t.drawImage(s.a.goomba2,c.e*e,c.e*r);break;case 2:t.drawImage(s.a.goomba,c.e*e,c.e*r);break;case 3:t.drawImage(s.a.goomba3,c.e*e,c.e*r)}},e}(h)}}]);
//# sourceMappingURL=index.tsx~route-po~a41bf43c.chunk.4160b.js.map