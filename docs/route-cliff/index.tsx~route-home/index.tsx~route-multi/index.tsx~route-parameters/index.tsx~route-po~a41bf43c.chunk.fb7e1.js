(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"6aRn":function(t,e,a){"use strict";function r(t){return new Promise((function(e){return setTimeout(e,t)}))}a.d(e,"a",(function(){return r}))},CHqN:function(t,e){"use strict";var a={ground:new Image,borderTop:new Image,borderLeft:new Image,borderRight:new Image,borderLeftUp:new Image,borderRightUp:new Image,borderBottom:new Image,borderBottom2:new Image,borderBottomLeft:new Image,borderBottomLeft2:new Image,borderBottomRight:new Image,borderBottomRight2:new Image,goomba:new Image,goomba2:new Image,goomba3:new Image,marioFace:new Image,marioFace1:new Image,marioFace2:new Image,marioLeft:new Image,marioLeft1:new Image,marioLeft2:new Image,marioRight:new Image,marioRight1:new Image,marioRight2:new Image,marioBack:new Image,marioBack1:new Image,marioBack2:new Image,block:new Image,redBlock:new Image,blockShadow:new Image};a.ground.src="assets/ground.png",a.borderTop.src="assets/border_top.png",a.borderLeft.src="assets/border_left.png",a.borderRight.src="assets/border_right.png",a.borderLeftUp.src="assets/border_left_up.png",a.borderRightUp.src="assets/border_right_up.png",a.borderBottom.src="assets/border_bottom.png",a.borderBottom2.src="assets/border_bottom2.png",a.borderBottomLeft.src="assets/border_bottom_left.png",a.borderBottomLeft2.src="assets/border_bottom_left2.png",a.borderBottomRight.src="assets/border_bottom_right.png",a.borderBottomRight2.src="assets/border_bottom_right2.png",a.goomba.src="assets/goomba.png",a.goomba2.src="assets/goomba2.png",a.goomba3.src="assets/goomba3.png",a.marioFace.src="assets/mario_front.png",a.marioFace1.src="assets/mario_front1.png",a.marioFace2.src="assets/mario_front2.png",a.marioBack.src="assets/mario_back.png",a.marioBack1.src="assets/mario_back1.png",a.marioBack2.src="assets/mario_back2.png",a.marioRight.src="assets/mario_right.png",a.marioRight1.src="assets/mario_right1.png",a.marioRight2.src="assets/mario_right2.png",a.marioLeft.src="assets/mario_left.png",a.marioLeft1.src="assets/mario_left1.png",a.marioLeft2.src="assets/mario_left2.png",a.block.src="assets/block.png",a.redBlock.src="assets/red_block.png",a.blockShadow.src="assets/block_shadow.png",e.a=a},CpHl:function(t,e,a){"use strict";(function(t){a.d(e,"a",(function(){return l}));var r=a("QRet"),n=a("M/gY"),i=a("6aRn"),o=[255,0,255],s=[0,255,255],c=function(t){var e=Math.min(1,Math.max(0,1/(1+Math.exp(-3*t))));return"rgb(\n        "+Math.floor(s[0]+(o[0]-s[0])*e)+",\n        "+Math.floor(s[1]+(o[1]-s[1])*e)+",\n        "+Math.floor(s[2]+(o[2]-s[2])*e)+")"},l=function(e){var a=Object(r.j)(null),l=function(){return new Promise((function(t,r){function l(){return function(t,e,a,r){t.strokeStyle="#000000",t.lineWidth=1;for(var i=0;i<a;i++)for(var o=0;o<r;o++)t.fillStyle=c(0),t.fillRect(i*n.e,o*n.e,n.e,n.e),t.strokeRect(i*n.e,o*n.e,n.e,n.e),t.fillStyle=c(e[i][o][n.d]),t.beginPath(),t.moveTo((i+.5)*n.e,(o+.5)*n.e),t.lineTo((i+1)*n.e,o*n.e),t.lineTo(i*n.e,o*n.e),t.fill(),t.fillStyle=c(e[i][o][n.c]),t.beginPath(),t.moveTo((i+.5)*n.e,(o+.5)*n.e),t.lineTo((i+1)*n.e,o*n.e),t.lineTo((i+1)*n.e,(o+1)*n.e),t.fill(),t.fillStyle=c(e[i][o][n.a]),t.beginPath(),t.moveTo((i+.5)*n.e,(o+.5)*n.e),t.lineTo((i+1)*n.e,(o+1)*n.e),t.lineTo(i*n.e,(o+1)*n.e),t.fill(),t.fillStyle=c(e[i][o][n.b]),t.beginPath(),t.moveTo((i+.5)*n.e,(o+.5)*n.e),t.lineTo(i*n.e,(o+1)*n.e),t.lineTo(i*n.e,o*n.e),t.fill()}(u,e.agent.Q,e.map.w,e.map.h),Promise.resolve(Object(i.a)(200)).then((function(){try{return l}catch(t){return r(t)}}),r)}function h(){return t()}var u,f;return null==a.current||null==(u=a.current.getContext("2d"))?t():(u.translate(n.e,n.e),function(t,e,a){t.strokeStyle="#000000";var r=t.createLinearGradient(0,(.5+a)*n.e,e*n.e,(.9+a)*n.e);r.addColorStop(1,"rgb("+o[0]+","+o[1]+","+o[2]+")"),r.addColorStop(0,"rgb("+s[0]+","+s[1]+","+s[2]+")"),t.fillStyle=r,t.strokeRect(0,(.5+a)*n.e,e*n.e,.4*n.e),t.fillRect(0,(.5+a)*n.e,e*n.e,.4*n.e),t.font="14px sans-serif",t.textAlign="center",t.fillStyle="#000000",t.fillText("0",e*n.e/2,(1.5+a)*n.e),t.fillText("+∞",e*n.e,(1.5+a)*n.e),t.fillText("-∞",0,(1.5+a)*n.e)}(u,e.map.w,e.map.h),(f=function(t){for(;t;){if(t.then)return void t.then(f,r);try{if(t.pop){if(t.length)return t.pop()?h.call(this):t;t=l}else t=t.call(this)}catch(t){return r(t)}}}.bind(this))(l))}))};return Object(r.d)((function(){l()})),t("canvas",{width:(2+e.map.w)*n.e,height:(3+e.map.h)*n.e,ref:a})}}).call(this,a("hosL").h)},"M/gY":function(t,e,a){"use strict";a.d(e,"d",(function(){return r})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return o})),a.d(e,"e",(function(){return s}));var r=0,n=1,i=2,o=3,s=24},VNCQ:function(t,e,a){"use strict";function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}a.d(e,"a",(function(){return s}));var n=a("CHqN"),i=a("M/gY"),o=function(t){for(var e=-1/0,a=[],r=0;r<t.length;r++)t[r]>e?(a=[r],e=t[r]):t[r]==e&&a.push(r);return 1==a.length?a[0]:a[Math.floor(Math.random()*a.length)]},s=function(){function t(t,e,a,n){r(this,"Q",[[[]]]),r(this,"learningRate",.3),r(this,"gamma",.8),r(this,"epsilon",.2),r(this,"beta",3),r(this,"softmax",!1),r(this,"QLearning",!1),r(this,"nSteps",1),r(this,"x",void 0),r(this,"y",void 0),r(this,"lastX",void 0),r(this,"lastY",void 0),r(this,"lastRewards",[]),r(this,"lastActions",[]),r(this,"lastGreedyAction",void 0),r(this,"initialPositionX",0),r(this,"initialPositionY",0),this.lastActions=[i.a],this.lastGreedyAction=i.a,this.initialPositionX=a||0,this.initialPositionY=n||0,this.x=this.initialPositionX,this.y=this.initialPositionY,this.lastX=[this.initialPositionX],this.lastY=[this.initialPositionY],this.initQ(t,e)}var e=t.prototype;return e.initQ=function(t,e){this.Q=[];for(var a=0;a<e;a++){for(var r=[],n=0;n<t;n++)r.push(new Array(4).fill(0));this.Q.push(r)}},e.newRun=function(){for(var t,e=(null==(t=this.lastActions)?void 0:t.shift())||i.a,a=this.nSteps;a>0;a--)this.reinforce(a,e);this.x=this.initialPositionX,this.y=this.initialPositionY,this.lastX=[this.initialPositionX],this.lastY=[this.initialPositionY],this.lastRewards=[],this.lastActions=[i.a]},e.chooseAction=function(){var t,e=this.Q[this.x][this.y];return t=this.softmax?function(t,e){for(var a=0,r=0;r<4;r++)a+=Math.exp(t*e[r]);for(var n=Math.random(),i=0,o=0;o<4;o++)if((i+=Math.exp(t*e[o])/a)>=n)return o;return 3}(this.beta,e):function(t,e){return Math.random()<t?Math.floor(Math.random()*e.length):o(e)}(this.epsilon,e),this.lastGreedyAction=o(e),this.reinforce(this.nSteps,t),this.lastActions.unshift(t),t},e.reinforce=function(t,e){if(!(this.lastRewards.length<t)){for(var a=-this.Q[this.lastX[t-1]][this.lastY[t-1]][this.lastActions[t-1]],r=1,n=t-1;n>=0;n--)a+=this.lastRewards[n]*r,r*=this.gamma;this.Q[this.lastX[t-1]][this.lastY[t-1]][this.lastActions[t-1]]+=this.learningRate*(a+=this.QLearning?r*this.Q[this.x][this.y][this.lastGreedyAction]:r*this.Q[this.x][this.y][e]),this.lastActions.pop(),this.lastRewards.pop(),this.lastX.pop(),this.lastY.pop()}},e.getReward=function(t){this.lastRewards.unshift(t)},e.newPosition=function(t,e){this.lastX.unshift(this.x),this.lastY.unshift(this.y),this.x=t,this.y=e},e.getSprite=function(t){switch(this.lastActions[0]){case i.d:switch(t%4){case 0:return n.a.marioBack;case 1:return n.a.marioBack1;case 2:return n.a.marioBack;case 3:return n.a.marioBack2}case i.c:switch(t%4){case 0:return n.a.marioRight;case 1:return n.a.marioRight1;case 2:return n.a.marioRight;case 3:return n.a.marioRight2}case i.a:switch(t%4){case 0:return n.a.marioFace;case 1:return n.a.marioFace1;case 2:return n.a.marioFace;case 3:return n.a.marioFace2}case i.b:switch(t%4){case 0:return n.a.marioLeft;case 1:return n.a.marioLeft1;case 2:return n.a.marioLeft;case 3:return n.a.marioLeft2}default:return console.log("Failed to get sprite for agent: "+this.lastActions),n.a.marioFace}},e.draw=function(t,e){var a=(this.x-this.lastX[0])*(e%4+1)/4,r=(this.y-this.lastY[0])*(e%4+1)/4;t.drawImage(this.getSprite(e),i.e*(this.lastX[0]+a),i.e*(this.lastY[0]+r)-i.e/2)},t}()},X7l8:function(t,e,a){"use strict";(function(t){a.d(e,"b",(function(){return S})),a.d(e,"c",(function(){return A})),a.d(e,"f",(function(){return P})),a.d(e,"d",(function(){return C})),a.d(e,"e",(function(){return j})),a.d(e,"a",(function(){return Q}));var r=a("QRet"),n=a("R82R"),i=a("ozoj"),o=a("GU4W"),s=a("wGBp"),c=a("Fk5B"),l=a("Y2Hm"),h=a("WLS8"),u=a("/ZiB"),f=a("oQEK"),m=a("7eGz"),g=a.n(m),d=a("YMGn"),b=a.n(d),p=a("wKER"),w=a.n(p),v=a("f0vW"),y=a.n(v),k=c.a,R=l.a,I=h.a,x=o.a,B=s.a,L=Object(n.a)((function(t){return Object(i.a)({slider:{width:100+2*t.spacing(3)},margin:{height:t.spacing(3)}})})),_=function(e){return t(B,{open:e.open,enterTouchDelay:0,placement:"top",title:e.value},e.children)},S=function(e){var a=Object(r.k)(e.agent.gamma),n=a[0],i=a[1],o=L();return t("div",null,t(u.a,{gutterBottom:!0},"Discount factor"),t(x,{min:0,max:1,step:.02,ValueLabelComponent:_,value:n,onChange:function(t,a){"number"!=typeof a&&(a=a[0]),e.agent.gamma=a,i(a)},className:o.slider}))},A=function(e){var a=Object(r.k)(e.agent.learningRate),n=a[0],i=a[1],o=L();return t("div",null,t(u.a,{gutterBottom:!0},"Learning rate"),t(x,{min:0,max:1,step:.02,ValueLabelComponent:_,value:n,onChange:function(t,a){"number"!=typeof a&&(a=a[0]),e.agent.learningRate=a,i(a)},className:o.slider}))},P=function(e){var a=Object(r.k)(e.agent.nSteps),n=a[0],i=a[1],o=L();return t("div",null,t(u.a,{gutterBottom:!0},"Number of steps"),t(x,{min:1,max:4,step:1,marks:!0,ValueLabelComponent:_,value:n,onChange:function(t,a){"number"!=typeof a&&(a=a[0]),e.agent.nSteps=a,i(a)},className:o.slider}))},C=function(e){var a=Object(r.k)(e.agent.QLearning),n=a[0],i=a[1];return t("div",null,t(R,{"aria-label":"Policy",name:"Policy",value:n,onChange:function(){e.agent.QLearning=!n,i(!n)}},t(I,{value:!1,control:t(k,null),label:"Sarsa"}),t(I,{value:!0,control:t(k,null),label:"Q-learning"})))},j=function(e){var a=Object(r.k)(e.agent.softmax),n=a[0],i=a[1],o=Object(r.k)(e.agent.epsilon),s=o[0],c=o[1],l=Object(r.k)(e.agent.beta),h=l[0],f=l[1],m=L();return t("div",null,t(R,{"aria-label":"Policy",name:"Policy",value:n,onChange:function(){e.agent.softmax=!n,i(!n)}},t(I,{value:!1,control:t(k,null),label:"ε-greedy"}),t(I,{value:!0,control:t(k,null),label:"Softmax"})),n?t("div",null,t(u.a,{gutterBottom:!0},"Beta"),t(x,{min:1,max:8,step:.1,ValueLabelComponent:_,value:h,onChange:function(t,a){e.agent.beta=a,f(a)},className:m.slider})):t("div",null,t(u.a,{gutterBottom:!0},"Epsilon"),t(x,{min:0,max:1,step:.02,ValueLabelComponent:_,value:s,onChange:function(t,a){e.agent.epsilon=a,c(a)},className:m.slider})))},Q=function(e){var a=Object(r.k)(e.map.run),n=a[0],i=a[1],o=Object(r.k)(e.map.refreshRate),s=o[0],c=o[1],l=n?"Pause":"Start",h=200,u="x20";switch(s){case 25:u="x8";break;case 100:u="x2";break;case 200:u="x1"}return t("div",null,t(B,{title:l},t(f.a,{"aria-label":"Play",onClick:function(){e.map.run=!n,i(!n)}},t(n?w.a:b.a,{fontSize:"small"}))),t(B,{title:u},t(f.a,{"aria-label":"Speed up",onClick:function(){return function(){switch(s){case 25:h=10;break;case 100:h=25;break;case 200:h=100}e.map.refreshRate=h,c(h)}()}},t(y.a,{fontSize:"small"}))),t(B,{title:"Reset"},t(f.a,{"aria-label":"Restart",onClick:function(){return e.map.restart()}},t(g.a,{fontSize:"small"}))))}}).call(this,a("hosL").h)},"u+C2":function(t,e,a){"use strict";(function(t){a.d(e,"a",(function(){return o}));var r=a("QRet"),n=a("M/gY"),i=a("6aRn"),o=function(e){var a=Object(r.j)(null);return Object(r.d)((function(){new Promise((function(t,r){function o(){return e.map.draw(c),Promise.resolve(Object(i.a)(e.map.refreshRate)).then((function(){try{return o}catch(t){return r(t)}}),r)}function s(){return t()}var c,l;return null==a.current||null==(c=a.current.getContext("2d"))?t():(c.translate(n.e,n.e),(l=function(t){for(;t;){if(t.then)return void t.then(l,r);try{if(t.pop){if(t.length)return t.pop()?s.call(this):t;t=o}else t=t.call(this)}catch(t){return r(t)}}}.bind(this))(o))}))})),t("canvas",{width:(2+e.map.w)*n.e,height:(3+e.map.h)*n.e,ref:a})}}).call(this,a("hosL").h)},x4ky:function(t,e,a){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function n(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function i(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function o(t,e){return new l(t,e)}a.d(e,"b",(function(){return u})),a.d(e,"c",(function(){return f})),a.d(e,"a",(function(){return m})),a.d(e,"d",(function(){return o}));var s=a("CHqN"),c=a("M/gY"),l=function(){function t(t,e){i(this,"map",void 0),i(this,"agents",void 0),i(this,"w",void 0),i(this,"h",void 0),i(this,"t",void 0),i(this,"turn",void 0),i(this,"run",!1),i(this,"initialRendering",!0),i(this,"refreshRate",200),this.turn=0,this.t=0,this.w=e,this.h=t,this.agents=[],this.map=[];for(var a=0;a<e;a++){var r=new Array(t);this.map.push(r)}}var e=t.prototype;return e.addAgent=function(t){this.agents.push(t)},e.addElement=function(t,e,a){this.map[e][a]=t},e.restart=function(){this.t=0,this.turn=0;var t=this.agents,e=Array.isArray(t),a=0;for(t=e?t:t[Symbol.iterator]();;){var r;if(e){if(a>=t.length)break;r=t[a++]}else{if((a=t.next()).done)break;r=a.value}var n=r;n.initQ(this.h,this.w),n.newRun()}},e.draw=function(t){if(this.run||this.initialRendering){this.initialRendering=!1,t.drawImage(s.a.borderLeftUp,-c.e,-c.e),t.drawImage(s.a.borderRightUp,c.e*this.w,-c.e);for(var e=0;e<this.w;e++)t.drawImage(s.a.borderTop,c.e*e,-c.e);for(var a=0;a<this.h;a++)for(var r=0;r<this.w;r++)t.drawImage(s.a.ground,c.e*r,c.e*a);for(var n=0;n<this.h;n++)t.drawImage(s.a.borderLeft,-c.e,c.e*n),t.drawImage(s.a.borderRight,c.e*this.w,c.e*n);for(var i=0;i<this.h;i++)for(var o=0;o<this.w;o++){var l=this.map[o][i];null!=l&&l.draw(t,o,i,this.t),this.drawAgent(t,o,i)}for(var h=0;h<this.w;h++)t.drawImage(s.a.borderBottom,c.e*h,c.e*this.h),t.drawImage(s.a.borderBottom2,c.e*h,c.e*(this.h+1));if(t.drawImage(s.a.borderBottomLeft,-c.e,c.e*this.h),t.drawImage(s.a.borderBottomLeft2,-c.e,c.e*(this.h+1)),t.drawImage(s.a.borderBottomRight,c.e*this.w,c.e*this.h),t.drawImage(s.a.borderBottomRight2,c.e*this.w,c.e*(this.h+1)),this.t++,this.t%4==0){this.turn++;var u=this.agents,f=Array.isArray(u),m=0;for(u=f?u:u[Symbol.iterator]();;){var g;if(f){if(m>=u.length)break;g=u[m++]}else{if((m=u.next()).done)break;g=m.value}var d=g,b=d.chooseAction();if(null==this.map[d.x][d.y]){var p=d.x,w=d.y;switch(b){case c.d:d.y>0&&w--;break;case c.c:d.x<this.w-1&&p++;break;case c.a:d.y<this.h-1&&w++;break;case c.b:d.x>0&&p--}var v=this.map[p][w];d.getReward(null!=v?v.reward:0),d.newPosition(p,w)}else d.newRun()}}}},e.drawAgent=function(t,e,a){var r=this.agents,n=Array.isArray(r),i=0;for(r=n?r:r[Symbol.iterator]();;){var o;if(n){if(i>=r.length)break;o=r[i++]}else{if((i=r.next()).done)break;o=i.value}o.x==e&&o.y==a&&o.draw(t,this.t)}},t}(),h=function(){function t(){i(this,"collision",void 0),i(this,"reward",void 0),i(this,"reset",void 0)}return t.prototype.draw=function(){},t}(),u=function(t){function e(){for(var e,a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return i(r(e=t.call.apply(t,[this].concat(n))||this),"collision",!1),i(r(e),"reward",1),i(r(e),"reset",!0),e}return n(e,t),e.prototype.draw=function(t,e,a){t.drawImage(s.a.block,c.e*e,c.e*(a-1.6)),t.drawImage(s.a.blockShadow,c.e*e,c.e*a)},e}(h),f=function(t){function e(){for(var e,a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return i(r(e=t.call.apply(t,[this].concat(n))||this),"collision",!1),i(r(e),"reward",.5),i(r(e),"reset",!0),e}return n(e,t),e.prototype.draw=function(t,e,a){t.drawImage(s.a.redBlock,c.e*e,c.e*(a-1.6)),t.drawImage(s.a.blockShadow,c.e*e,c.e*a)},e}(h),m=function(t){function e(){for(var e,a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return i(r(e=t.call.apply(t,[this].concat(n))||this),"collision",!1),i(r(e),"reward",-1),i(r(e),"reset",!0),e}return n(e,t),e.prototype.draw=function(t,e,a,r){switch(r%4){case 0:t.drawImage(s.a.goomba,c.e*e,c.e*a);break;case 1:t.drawImage(s.a.goomba2,c.e*e,c.e*a);break;case 2:t.drawImage(s.a.goomba,c.e*e,c.e*a);break;case 3:t.drawImage(s.a.goomba3,c.e*e,c.e*a)}},e}(h)}}]);
//# sourceMappingURL=index.tsx~route-po~a41bf43c.chunk.fb7e1.js.map